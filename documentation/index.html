---
layout: default
title: Documentation - sitespeed.io 3.0
description: Here's the documentation of sitespeed.io 3.0 the workflow.
keywords: documentation, workflow, sitespeed.io, jenkins, navigation timing api
author: Peter Hedenskog
nav: documentation
image: http://www.sitespeed.io/img/sitespeed-2.0-twitter.png
twitterdescription: Documentation for the coming 3.0 release.
---
 <div class="row">
    <div class="col-lg-12">
      <div class="page-header">
  <h1>
    Documentation version 3.0
  </h1>
  <p>
    Do you want the documentation for the 2.X version? You can find it <a href="/documentation-2.0/">here</a>.
  </p>
</div>
<div class="visible-xs">You need to use a larger screen to see the table of contents.</div>
<ul id="toc" class="hidden-xs">
  <li class="toc"><a href="#introduction">Introduction</a></li>
  <li class="toc"><a href="#installation">Download and installation</a></li>
  <ul>
  <li class="toc"><a href="#installationUbuntu">Installation fresh Ubuntu 14</a></li>
  </ul>
    <li class="toc"><a href="#configuration">Configuration</a></li>
    <ul>
      <li class="toc"><a href="#theoptions">The options</a></li>
      <li class="toc"><a href="#basic">The basics</a></li>
      <ul>
        <li class="toc"><a href="#analyzebycrawling">Analyze by crawling</a></li>
        <li class="toc"><a href="#analyzebyurls">Analyze by URL:s</a></li>
        <li class="toc"><a href="#analyzesites">Analyze sites and benchmark</a></li>
        <li class="toc"><a href="#includeexclude">Include/exclude URL:s when crawling</a></li>
        <li class="toc"><a href="#screenshots">Screenshots</a></li>
        <li class="toc"><a href="#profiles">Profiles: test as desktop or mobile</a></li>
        <li class="toc"><a href="#mobile">Setting explicit viewport/user agent & mobile</a></li>
        <li class="toc"><a href="#limitpages">Limit pages to test</a></li>
        <li class="toc"><a href="#browsertimemetrics">Collect timing metrics</a></li>
        <li class="toc"><a href="#connectionspeed">Throttle the connection</a></li>
      </ul>
      <li class="toc"><a href="#nerdy">A little more nerdy</a></li>
        <ul>
        <li class="toc"><a href="#gpsi">Fetch data Google Page Speed Insights</a></li>
        <li class="toc"><a href="#wpt">Fetch data from WebPageTest</a></li>
        <li class="toc"><a href="#graphite">Send your data to Graphite</a></li>
        <li class="toc"><a href="#requestHeaders">Set request headers</a></li>
        <li class="toc"><a href="#config-boxes">Configure boxes on summary page</a></li>
        <li class="toc"><a href="#config-columns">Configure columns on pages page</a></li>
      </ul>
    </ul>
   <li class="toc"><a href="#usingwpt">Using WebPageTest</a></li>
   <li class="toc"><a href="#usinggpsi">Using Google Page Speed Insights</a></li>
   <li class="toc"><a href="#phantomjs">Using PhantomJS 2</a></li>
   <li class="toc"><a href="#continuousintegration">Continuous integration</a></li>
  <ul>
     <li class="toc"><a href="#junitandTAP">JUnit and TAP</a></li>
     <li class="toc"><a href="#configurelimits">Configure when to break a test</a></li>
     <li class="toc"><a href="#skiptests">Skip rule tests</a></li>
     <li class="toc"><a href="#headless">Fetching timings headless</a></li>
     <li class="toc"><a href="#jenkins">Jenkins</a></li>
  <li class="toc"><a href="#travis">Travis</a></li>
  <li class="toc"><a href="#grunt">Grunt</a></li>

</ul>
  <li class="toc"><a href="#graphite">Graphite</a></li>

<li class="toc">Metrics</li>
<ul>
  <li class="toc"><a href="#timingMetrics">Timing metrics</a></li>
  <li class="toc"><a href="#timingMetricsWPT">Timing metrics from WebPageTest</a></li>
</ul>

    <li class="toc">Use cases</li>
<ul>
      <li class="toc">Crawl and test one site</li>
      <li class="toc">Test specific URL:s for one site</li>
      <li class="toc">Compare your site and benchmark against other sites</li>
      <li class="toc">Performance budget</li>
  </ul>



 <li class="toc"><a href="#developers">Developers</a></li>
  <ul>
  <li class="toc"><a href="#postTasks">Add your own post tasks</a></li>
  <li class="toc"><a href="#dependencies">Dependencies</a></li>
     <li class="toc"><a href="#components">Components</a></li>
     <li class="toc"><a href="#feature">Create a new feature request</a></li>
     <li class="toc"><a href="#bug">Report a bug</a></li>
   </ul>
 </ul>


 <div class="section" id="introduction">
  <div class="page-header">
      <h1>Introduction</h1>
    </div>
    <p>Sitespeed.io is an open source tool that helps you understand if your site is fast or not. It tests
      your site against web performance best practice rules, get timings using Chrome/Firefox or PhantomJS 2 (using the Navigation Timing API and User Timing API).
    </p><p>
      You can also drive <a href="http://www.webpagetest.org/">WebPageTest</a> using sitespeed.io, collecting data from
      multiple URL:s tested using WebPageTest.
    </p>
      Sitespeed.io outputs tthe information as HTML/JSON or JUnit XML or <a href="http://testanything.org/">TAP</a>. And can automatically send the collected metrics to <a href="http://graphite.wikidot.com/">Graphite</a>.
    </p>
 </div>
<div class="section" id="installation">

      <div class="page-header">

      <h1>Download and installation</h1>
    </div>
    <h3>Install on Mac, Linux & Windows</h3>
        <p>Prerequisites: Install <a href="http://nodejs.org/download/">NodeJS</a> (<a href="https://github.com/creationix/nvm">Ubuntu</a>) and make sure you have <a href="https://github.com/npm/npm">npm</a> installed.</p>
<pre class="bash">
$ npm install sitespeed.io
</pre>

<p>
If you want it installed globally (running it from wherever):
</p>
<pre class="bash">
$ npm install sitespeed.io -g
</pre>

        <p>Run</p>
        <pre class="bash">$ sitespeed.io -h</pre>
        <p>or on Windows:</p>
        <pre class="bash">$ nodejs sitespeed.io -h</pre>
</div>

<div class="section" id="installationUbuntu">

  <div class="page-header">

    <h1>Install on a clean Ubuntu 14</h1>
  </div>
    <p>Here are the steps you need to do to install on a newly installed Ubuntu 14:</p>
    <p>
        Install nodejs (using nvm)
        <pre class="bash">$ sudo apt-get update</pre>
        <pre class="bash">$ sudo apt-get install curl</pre>
        <pre class="bash">$ curl https://raw.githubusercontent.com/creationix/nvm/v0.16.1/install.sh | sh</pre>
        <pre class="bash">$ nvm install 0.11.14</pre>
        Install java
        <pre class="bash">$ sudo apt-get install default-jre</pre>
        Install sitespeed.io
        <pre class="bash">$ npm install sitespeed.io@3.0.0-beta-4 -g</pre>
        Install Firefox (if you want to test using Firefox)
        <pre class="bash">$ sudo apt-get install firefox</pre>
        Install Chrome
        <pre class="bash">$ wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -</pre>
        <pre class="bash">$ sudo sh -c 'echo "deb http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list'</pre>
        <pre class="bash">$ sudo apt-get update</pre>
        <pre class="bash">$ sudo apt-get install google-chrome-stable</pre>
        And follow <a href="http://yizeng.me/2014/04/20/install-chromedriver-and-phantomjs-on-linux-mint/">these</a> instructions to install the Chrome driver.
        And if you want to run headless using <a href="http://manpages.ubuntu.com/manpages/natty/man1/Xvfb.1.html">Xvfb</a>
        <pre class="bash">$ sudo apt-get install xvfb</pre>
        <pre class="bash">$ sudo apt-get install libgl1-mesa-dri</pre>
        <pre class="bash">$ sudo apt-get install xfonts-100dpi xfonts-75dpi xfonts-scalable xfonts-cyrillic</pre>
    </p>
</div>

<div class="section" id="configuration">

      <div class="page-header">
      <h2>Configuration</h2>
    </div>
    <p>Sitespeed.io is highly configurable, let's check it out!</p>
  </div>

<div class="section" id="theoptions">

      <div class="page-header">
      <h2>The options</h2>
    </div>

<p>You have the following options running sitespeed.io:</p>
<pre>
Usage: node sitespeed.js [options]

Options:
-u &lt;URL&gt;, --url &lt;URL&gt;                                  The start url that will be used when crawling.
-f &lt;FILE&gt;, --file &lt;FILE&gt;                               The path to a plain text file with one URL on each row. Each URL will be analyzed.
--sites &lt;FILE&gt;                                         The path to a plain text file with one URL on each row. Each URL is crawled.
-V, --version                                          Display the sitespeed.io version.
-d &lt;INTEGER&gt;, --deep &lt;INTEGER&gt;                         How deep to crawl.  [1]
-c &lt;KEYWORD&gt;, --containInPath &lt;KEYWORD&gt;                Only crawl URLs that contains this in the path.
-s &lt;KEYWORD&gt;, --skip &lt;KEYWORD&gt;                         Do not crawl pages that contains this in the path.
-t &lt;NOOFTHREADS&gt;, --threads &lt;NOOFTHREADS&gt;              The number of threads/processes that will analyze pages.  [5]
--name &lt;NAME&gt;                                          Give your test a name, it will be added to all HTML pages.
--memory &lt;INTEGER&gt;                                     How much memory the Java processed will have (in mb).  [1024]
-r &lt;DIR&gt;, --resultBaseDir &lt;DIR&gt;                        The result base directory, the base dir where the result ends up.  [sitespeed-result]
--outputFolderName                                     Default the folder name is a date of format yyyy-mm-dd-HH-MM-ss
--userAgent &lt;USER-AGENT&gt;                               The full User Agent string, default is Chrome for MacOSX. [userAgent|ipad|iphone].
--viewPort &lt;WidthxHeight&gt;                              The view port, the page viewport size WidthxHeight like 400x300.  [1280x800]
-y &lt;FILE&gt;, --yslow &lt;FILE&gt;                              The compiled YSlow file.  [phantomjs/yslow-3.1.8-sitespeed.js]
--ruleSet &lt;RULE-SET&gt;                                   Which ruleset to use.  [sitespeed.io-desktop]
--limitFile &lt;PATH&gt;                                     The path to the limit configuration file.  [../conf/desktopRules.json]
--basicAuth &lt;USERNAME:PASSWORD&gt;                        Basic auth user & password.
-b &lt;BROWSER&gt;, --browser &lt;BROWSER&gt;                      Choose which browser to use to collect timing data. Use multiple browsers in a comma separated list (firefox|chrome|phantomjs)
--connection                                           Limit the speed by simulating connection types. Choose between mobile3g,mobile3gfast,cable,native  [native]
--btConfig &lt;JSON&gt;                                      Additional BrowserTime configuration
--profile &lt;desktop|mobile&gt;                             Choose between testing for desktop or mobile. Testing for desktop will use desktop rules & user agents and vice verca.  [desktop]
-n &lt;NUMBEROFTIMES&gt;, --no &lt;NUMBEROFTIMES&gt;               The number of times you should test each URL when fetching timing metrics. Default is 3 times.  [3]
--screenshot                                           Take screenshots for each page (using the configured view port).
--junit                                                Create JUnit output to the console.
--tap                                                  Create TAP output to the console.
--skipTest &lt;ruleid1,ruleid2,...&gt;                       A comma separated list of rules to skip when generating JUnit/TAP output.
--testData                                             Choose which data to send test when generating TAP/JUnit output. Default is all availible [rules,timings,wpt,gpsi]  [all]
--thresholdFile &lt;FILE&gt;                                 A file containing JSON like  {"rules": {"default": 88}}
--threshold &lt;JSON&gt;                                     JSON like  {\"timings\": {\"domContentLoadedTime\": 700}}
-m &lt;NUMBEROFPAGES&gt;, --maxPagesToTest &lt;NUMBEROFPAGES&gt;   The max number of pages to test. Default is no limit.
--storeJson                                            Store all collected data as JSON.
-p &lt;PROXY&gt;, --proxy &lt;PROXY&gt;                            http://proxy.soulgalore.com:80
--cdns &lt;cdn1,cdn2&gt;                                     A comma separated list of additional CDNs.
--postTasksDir &lt;dir&gt;                                   The directory where you have your extra post tasks.
--boxes &lt;box1,box2&gt;                                    The boxes showed on site summary page, see http://www.sitespeed.io/documentation/#config-boxes
-c &lt;column1,column2&gt;, --columns &lt;column1,column2&gt;      The columns showed on detailed page summary table, see http://www.sitespeed.io/documentation/#config-columns
--configFile &lt;PATH&gt;                                    The path to a sitespeed.io config.json file, if it exists all other input parameters will be overidden.
--aggregators &lt;PATH&gt;                                   The path to a directory with extra aggregators.
--collectors &lt;PATH&gt;                                    The path to a directory with extra collectors.
--graphiteHost &lt;HOST&gt;                                  The Graphite host.
--graphitePort &lt;INTEGER&gt;                               The Graphite port.  [2003]
--graphiteNamespace &lt;NAMESPACE&gt;                        The namespace of the data sent to Graphite.  [sitespeed.io]
--graphiteData                                         Choose which data to send to Graphite by a comma separated list. Default all data is sent. [summary,rules,pagemetrics,timings]  [all]
--gpsiKey                                              Your Google API Key, configure it to also fetch data from Google Page Speed Insights.
--noYslow                                              Set to true to turn of collecting metrics using YSlow.
--wptConfig &lt;JSON&gt;                                     WebPageTest configuration, see https://github.com/marcelduran/webpagetest-api runTest method 
--wptUrl &lt;URL&gt;                                         The URL to your private webpagetest instance.
--wptKey &lt;KEY&gt;                                         The API key if running on webpagetest on the public instances.
--requestHeaders &lt;JSON&gt;                                Any request headers to use, in the JSON form of {\"name\":\"value\",\"name2\":\"value\"}. Not supported for WPT & GPSI.

   </pre>
   <p>
     Yep, that was a lot, we know. Lets go into some standard use cases.
   </p>

</div>


<div class="section" id="basic">
    <div class="page-header">
    <h2>The basics</h2>
  </div>

<p>If you installed with the global option (-g), run the command <em>sitespeed.io</em> else run the script <em>lib/sitespeed.js</em>.  In the examples we will use the script but you know what to do if you have it installed.</p>
  <p>You can analyze a site either by crawling or feed sitespeed.io with the URL:s you want to analyze.
</p>
</div>

<div class="section" id="analyzebycrawling">
    <div class="page-header">
    <h2>Analyze by crawling</h2>
</div>
<p>The crawler need a start URL (the parameter <strong>u</strong>, from where it will start the crawl). It will fetch all links within the same domain as the URL that you provide. You can then choose how deep you want to crawl with the <strong>d</strong> parameter. Zero will fetch only the
  URL that you provide. One will fetch all links on that page and analyze these, two will go one level deeper and so on. If you want to analyze a site and the links with a depth of two, you do like this:
</p>
<pre class="bash">$ sitespeed.io -u http://www.yoursite.com -d 2</pre>

<div class="note note-info">Remember that you can start your crawl deep into your path structure like <strong style="word-wrap: break-word; white-space: normal;">http://yoursite.com/my/path</strong>.</div>
</div>


<div class="section" id="analyzebyurls">
    <div class="page-header">
    <h2>Analyze by URL:s</h2>
</div>
<p>Instead of giving a start URL for the crawl, you can supply a plain text file with one URL on each row. Then each of these URL will be analyzed, no more or no less. A file like this will do:</p>

<pre>
http://www.yoursite.com/path/
http://www.yoursite.com/my/really/important/page/
http://www.yoursite.com/where/we/are/
</pre>
<p>Then you feed the file to the script:</p>
<pre class="bash">$ sitespeed.io -f myurls.txt</pre>
<div class="note note-info">This is good for testing and keep track of your site in production and you have a LARGE site with many pages and a couple of them are more important than the rest. </div>
</div>

<div class="section" id="analyzesites">
    <div class="page-header">
    <h2>Analyze sites and benchmark</h2>
</div>
<p>If you want to test and benchmark sites you can do like this:</p>

<pre>
http://www.yoursite.com/path/
http://www.mycompetition.com/
http://www.mycompetition2.com/
</pre>
<p>Then you feed the file to the script and each URL will be crawled. You can run the crawl the exact same way as usual, by feeding parameters.</p>
<pre class="bash">$ sitespeed.io --sites mysitesurls.txt</pre>

<p>
   If you instead want to compare a couple of URL:s between sites (pre defined URLS instead of crawling), do like this:
   Create a master plain text file. Each row of this file points out another file that contains the specif URLs for that site.
   The master looks like this (master.txt):
   <pre>
theguardian.txt
nytimes.txt
...
   </pre>
   Then create the specific files (theguardian.txt):
   <pre>
http://www.theguardian.com/uk
http://www.theguardian.com/uk/sport
http://www.theguardian.com/uk/culture
   </pre>
   And nytimes.txt:
   <pre>
http://www.nytimes.com/
http://www.nytimes.com/pages/sports/index.html
http://www.nytimes.com/pages/fashion/index.html
   </pre>
   You can of course add how many URL:s and sites you want.
   Then you run the whole thing like this:
<pre class="bash">$ sitespeed.io --sites master.txt</pre>
  Checkout the Graphite section to see how you can graph the runs nicely.

</p>

</div>

<div class="section" id="includeexclude">
    <div class="page-header">
    <h2>Include/exclude URL:s when crawling</h2>
</div>
<p>You want to make sure that parts of your site isn't included in your analyze, then you can add the parameter <strong>s</strong> and a keyword. Every URL with that keyword will not be included.</p>
 <pre class="bash">$./bin/sitespeed.io -u http://yoursite.com  -s /monkey/</pre>
<p>You can also do it the other way around, with the <strong>c</strong> and a keyword. In this case, the analyze will only include URL:s with the keyword.</p>
<pre class="bash">$  ./bin/sitespeed.io -u http://yoursite.com  -c /the/path/</pre>
</div>

<div class="section" id="screenshots">
    <div class="page-header">
 <h2>Screenshots</h2>
</div>
<p>You can get screenshots of every page that you analyze. These will end up on a screenshot page where you can check them all. The screenshots will be taken for the chosen viewport.
</p>
<pre class="bash">$ sitespeed.io -u http://yoursite.com  --screenshot</pre>
</div>

<div class="section" id="profiles">
    <div class="page-header">
 <h2>Shortcut: test as desktop or mobile</h2>
</div>
<p>By default you test as desktop, if you turn on mobile by just setting the profile. If you do that, you will automatically test with
with mobile rules, an IOS user agent, view port of 320x444 and on a throttled connection simulating a mobile 3g connection.</p>
<pre class="bash">$ sitespeed.io -u http://yoursite.com  --profile desktop</pre>
<pre class="bash">$ sitespeed.io -u http://yoursite.com  --profile mobile</pre>
</div>

<div class="section" id="mobile">
    <div class="page-header">
 <h2>Viewport/user agent and mobile</h2>
</div>
<p>You can set the viewport & user agent, so that you can fake testing a site as a mobile device.</p>

<p>By default the viewport is 1280x800 with the following user agent for Chrome on MacOSX.</p>

<pre class="bash">$ sitespeed.io -u http://yoursite.com  --viewPort 400x300 --userAgent "My SUPER BROWSER"</pre>

<div class="note note-warning">
Mobile testing is always best on mobile devices. For tips on how to best do that, read Andy Davies <a href="http://andydavies.me/" >blog</a>.
</div>
</div>

<div class="section" id="limitpages">
    <div class="page-header">
 <h2>Limit pages to test</h2>
</div>
<p>Sometimes you want to limit the amount to test (I do that when I compare sites). That will test maximum the amount of pages you supply.</p>
<pre class="bash">$ sitespeed.io -u http://yoursite.com  -m 10</pre>
</div>

<div class="section" id="name">
    <div class="page-header">
 <h2>Set a name of your test</h2>
</div>
    <p>You can give your test run a name, that will be showed on all the pages.</p>
    <pre class="bash">$ sitespeed.io -u http://yoursite.com/ --name "Swedens top 100 sites"</pre>
</div>

<div class="section" id="browsertimemetrics">
    <div class="page-header">
 <h2>Collect timing metrics</h2>
</div>
<p>Sitespeed.io collect timing metrics using the Navigation Timing API and the User Timing API. Today you can use
Chrome, Firefox and PhantomJS 2.0. And hopefully more browsers in the future.</p>

<p>Add the parameter <em>c</em> followed by the browser name. </p>
<pre class="bash">$ sitespeed.io -u http://yoursite.com  -b firefox</pre>

<p>Each page is tested 3 times by default. You can change that with the <em>n</em> parameter.  Test using  Chrome and test each page 9 times, looks like this:</p>

<pre class="bash">$ sitespeed.io -u http://yoursite.com  -b chrome -n 9</pre>

<p>If you want to test in multiple browsers, you add them in a comma separated list:</p>
<pre class="bash">$ sitespeed.io -u http://yoursite.com  -b firefox,chrome -n 7</pre>

<div class="section" id="connectionspeed">
    <div class="page-header">
 <h2>Throttle the connection</h2>
</div>
<p>
  You can throttle the connection when you are fetching metrics using the browse. Choose between:
  <ul>
    <li><strong>mobile3g</strong> - 1.6 Mbps/768 Kbps - 300 RTT</li>
    <li><strong>mobile3gfast</strong> - 1.6 Mbps/768 Kbps - 150 RTT</li>
    <li><strong>cable</strong> - 5 Mbps/1 Mbps - 28 RTT</li>
    <li><strong>native</strong> - the current connection</li>
  </ul>
  And do like this:
</p>
<pre class="bash">$ sitespeed.io -u http://yoursite.com -b chrome --connection mobile3g</pre>

</div>


<div class="section" id="gpsi">
    <div class="page-header">
 <h2>Fetch data Google Page Speed Insights</h2>
</div>
<p>
  To test each page using GPSI, you need to have a a Google API Key. You can get one <a href="https://console.developers.google.com/project">here</a>. Testing using GPSI will
  include the GPSI score in the summary page and all individual data on the detailed page.
</p>
<pre class="bash">$ sitespeed.io -u http://yoursite.com  --gpsiKey MY_SECRET_KEY</pre>

</div>

<div class="section" id="wpt">
    <div class="page-header">
 <h2>Fetch data from WebPageTest</h2>
</div>

<p>Yep, it is true! You can drive WebPageTest from sitespeed.io. You need to either have your own private instance or an API key.
</p>
<pre class="bash">$ sitespeed.io -u http://yoursite.com  --wptUrl www.webpagetest.org --wptKey MY_SECRET_API_KEY</pre>
<p>
  In the background Marcel Durans WPT API is used, specific the <a href="https://github.com/marcelduran/webpagetest-api#user-content-test-works-for-test-command-only">runTest</a> method.
  You can pass all the parameters in the runTest through sitespeed.io by the <strong>--wptConfig</strong> parameter and supply a JSON.
</p>
<p>
  By default, the following values are passed to WPT:
<pre>
pollResults: 10,
timeout: 600,
firstViewOnly: false,
runs: // the number of runs you configure by the n parameter
private: true,
aftRenderingTime: true,
location: 'Dulles:Chrome',
video: true
</pre>
And if you configured basic auth, the login/password is also passed to WPT.
</p>
<p>
If you pass your own <strong>--wptConfig</strong>, a fields matching will override the default configuration.
</p>
</div>

<div class="section" id="graphite">
    <div class="page-header">
 <h2>Send your data to Graphite</h2>
</div>

<p>You can choose to send your data to Graphite, to keep track of your performance over time.
You configure four things: the host, port, the namespace and which data to send. Default vaule for the port is 2003, namespace (the start of the key) is sitespeed and send all collected data.</p>
</p>
<pre class="bash">$ sitespeed.io -u http://www.sitespeed.io --graphiteHost localhost</pre>
</div>

<div class="section" id="requestHeaders">
    <div class="page-header">
 <h2>Set request headers</h2>
</div>
<p>The headers can be set if you collect rule and timings. It will not work for WPT and GPSI.
</p>
<pre class="bash">$ sitespeed.io -u http://www.sitespeed.io --requestHeaders {\"mysupercoolheader\":\"value\",\"coolheader2\":\"value2\"}</pre>
</div>

<div class="section" id="config-boxes">
    <div class="page-header">
 <h2>Configure boxes on summary page</h2>
</div>
<p>You can choose which boxes you want to show on the summary page by configure them by their name. You can choose to
  show to configure them exactly as you want. Then you need to pass every name to the script:
</p>
<pre class="bash">$ sitespeed.io -u http://www.sitespeed.io --boxes thirdpartyversions,ycdn</pre>
<p>Or if you want to add boxes to the already pre-configured ones, you can add a plus sign before the name(it is perfect
  if you have your own User Timings that you want to show):
<pre class="bash">$ sitespeed.io -u http://www.sitespeed.io -b chrome --boxes +logoTime,headerTime</pre>
<p>These boxes will then end up in the end of the list.</p>
</div>

<div class="section" id="config-columns">
    <div class="page-header">
 <h2>Configure columns on pages page</h2>
 <p>You can choose what kind of data you want to show in the colum pages.</p>
 <pre class="bash">$ sitespeed.io -u http://www.sitespeed.io -b chrome -c logoTime,headerTime</pre>
</div>

</div>

<div class="section" id="requestHeaders">
    <div class="page-header">
 <h2>Set request headers</h2>
</div>
<p>The headers can be set if you collect rule and timings. It will not work for WPT and GPSI.
</p>
<pre class="bash">$ sitespeed.io -u http://www.sitespeed.io --requestHeaders {\"mysupercoolheader\":\"value\",\"coolheader2\":\"value2\"}</pre>
</div>

<div class="section" id="usingwpt">
       <div class="page-header">
      <h2>Using WebPageTest</h2>
    </div>
    <p>Yep we all love WebPageTest (WPT), so we made it possible to drive an instance of and collect the data from it.
    Out of the it will collect <a href="https://github.com/sitespeedio/sitespeed.io/tree/master/lib/aggregators/webpagetest">these</a> metrics
    that can be displayed on the summary page. By default, these will be shown:</p>

    <p class="text-center">
      <a href="wpt-summary.png"><img src="wpt-summary.png" alt="" class="img-thumbnail"/></a>
    </p>
    <p>
      On the pages summary, you will also automatically get the SpeedIndex score:
    </p>

    <p class="text-center">
      <a href="wpt-pages.png"><img src="wpt-pages.png" alt="" class="img-thumbnail"/></a>
    </p>

    <p>
      And on the detailed summary page, we show some interesting metrics and the waterfalls
      for the median result of both first and repeated view:
    </p>

    <p class="text-center">
      <a href="wpt-detailed-page-info.png"><img src="wpt-detailed-page-info.png" alt="" class="img-thumbnail"/></a>
    </p>

    <div class="page-header">
    <h2>Configuration<h2>
    </div>
    <p>Coming soon!</p>

    <div class="page-header">
   <h2>Performance budget</h2>
 </div>
 <p>Yep, the data collected from WPT can be used to break your build test using TAP or JUnit.xml output!


 </p>

<div class="page-header">
<h2>Graph the WPT metrics</h2>
</div>
<p>
  The data collected and showed, will also be sent to Graphite.
</p>

</div>

<div class="section" id="usinggpsi">
       <div class="page-header">
      <h2>Using Google Page Speed Insights</h2>
    </div>
    <p>Google Page Speed Insights (GPSI) is Google:s rule/best practices rules to build a web site that are as fast as possible.
      Follow the rules and your site will be fast.</p>
    <p>
      Sitespeed.io integrates GPSI so you can fetch how good your site is doing. Two things: Your site needs to reachable from the internet (and no basic authentication) and
      you need to supply your own <a href="https://console.developers.google.com/project">Google key</a>.</p>
      <p>
          Run it like this:
          <pre class="bash">$ sitespeed.io -u http://yoursite.com  --gpsiKey MY_SECRET_KEY</pre>
      </p>
      <p>
        Sitespeed.io will collect all availible data from GPSI. On the summary page,
        the GPSI score will be shown. We also collect number of requests. You can check the implementation
        <a href="https://github.com/sitespeedio/sitespeed.io/tree/master/lib/aggregators/gpsi">here</a> and add
        an issue if you want us to collect more data:</p>
        <p class="text-center">
          <a href="gpsi-summary.png"><img src="gpsi-summary.png" alt="" class="img-thumbnail"/></a>
        </p>
        <p>
          On the pages summary, you will also automatically the GPSI score:
        </p>

        <p class="text-center">
          <a href="gpsi-pages.png"><img src="gpsi-pages.png" alt="" class="img-thumbnail"/></a>
        </p>

        <p>
          And on the detailed summary page, we show all the data that are provided by GPSI, it
          looks like this:
        </p>

        <p class="text-center">
          <a href="gpsi-detailed-page-info.png"><img src="gpsi-detailed-page-info.png" alt="" class="img-thumbnail"/></a>
        </p>

</div>

<div class="section" id="phantomjs">
       <div class="page-header">
      <h2>PhantomsJS 2</h2>
    </div>
    <p>To be added.</p>
</div>


<div class="section" id="continuousintegration">
       <div class="page-header">
      <h2>Continuous integration</h2>
    </div>
    <p>Use sitespeed.io to keep track of what is happening with your site and make sure you know that you don't break the performance best practice rules <em>before</em> your changes are released.
      Your build can also be broken if your page timings (choose whatever timing you need from the Navigation Timing API or your own custom timing) break your limits. And of course, if you use WebPageTest or
      Google Page Speed Insights, you can use the metrics from them to break your build.
    </p>
    <p>
      Sitespeed.io outputs <a href="http://help.catchsoftware.com/display/ET/JUnit+Format">JUnit XML</a> and <a href="http://testanything.org/">TAP</a> that test your metrics against your configured limits.
    </p>

 </div>
<div class="section" id="junitandTAP">
 <div class="page-header">
      <h2>Generating JUnit XML or TAP</h2>
    </div>
       <p>Sitespeed can output <em>junit.xml</em> that works perfect with your continuous integration tool. Jenkins, Bamboo and others support it out of the box.</p>
       <pre class="bash">$ sitespeed.io -u http://www.sitespeed.io --junit</pre>
       <p>And if you rather prefer TAP:</p>
       <pre class="bash">$ sitespeed.io -u http://www.sitespeed.io --tap</pre>

</div>

<div class="section" id="configurelimits">
 <div class="page-header">
      <h2>Configure when to break a test</h2>
    </div>
    <p>By default these are the values that are tested:</p>
    <pre>
{
  "rules": {
    "default": 90
  },
  "timings": {
    "serverResponseTime": 300,
    "domContentLoadedTime": 700
  },
  "wpt": {
    "SpeedIndex": 1000
  },
  "gpsi": {
    "score": 90
  }
}
    </pre>
<p>Thie means that all rules must be 90 or better,serverResponseTime 300 ms or better,
domContentLoadedTime to be faster than 700 ms. If you use WebPageTest, the speed index need to be under 1000.
And finally, if you use Goggle Page Speed Insights, the score must be 90 or better.</p>

<p>
  You can configure either to point out a JSON file containing all the values or
  feeding them in the one liner. If you use a file, do like this:
</p>
    <pre class="bash">$ sitespeed.io -u http://www.sitespeed.io --tap --thresholdsFile myLimitFile.json</pre>
    <p>
      Or the one liner:
    </p>
    <pre class="bash">$ sitespeed.io -u http://www.sitespeed.io --tap --threshold {\"rules\":{\"default\":80}}</pre>
</div>
<div class="section" id="skiptests">
 <div class="page-header">
      <h2>Skip rule tests</h2>
    </div>
    <p>
      By default a all rules is tested against the default number you specify, meaning all rules needs to be 90 or better.
      Sometimes you have some rules you don't care about and can skip. You do that
      by feeding the rule names to the script. You find all the names <a href="/rules/">here</a>.

      <pre class="bash">$ sitespeed.io -u http://www.sitespeed.io --skipTest ycdn,textcontent --tap</pre>
    </p>
</div>

<div class="section" id="headless">
    <div class="page-header">
 <h2>Fetching timings headless</h2>
</div>
  <p>Fetching timings using PhantomJS 2.0 is headless by default. If you run on Linux and want to emulate a screen (a.k.a running a browser without a screen), you need to do this before running:</p>
  <ul>
  <li>Install <a href="http://www.x.org/releases/current/doc/man/man1/Xvfb.1.xhtml" >XVFB</a>.</li>
  <li>Setup a start script, something like <a href="https://gist.github.com/jterrace/2911875" >this</a>.</li>
  <li>Export the display, make sure to have the same number as in the examle in the Gist: <em>export DISPLAY=:99.0</em></li>
  <li>Start Xvfb: <em>sh -e /etc/init.d/xvfb start</em></li>
</ul>
</div>


<div class="section">
      <h2 id="jenkins">Jenkins</h2>
       <p>You may love or you may hate <a href="http://jenkins-ci.org/">Jenkins</a>, we think it is a great open source continuous integration server.
  And to get sitespeed.io up and running is easy. And combine it with Graphite will add some super power.
  </p>
  <p>
    <ol>
      <li>
        Choose <strong>New Item</strong> and create a new freestyle project.
      </li>
      <li>
        Choose <strong>Add build step</strong> in the Build part and <strong>Execute shell</strong> you will have a box where you add your sitespeed.io CLI magic. Remember that the
        Jenkins user needs to have nodejs in the path. It can look like this (sending the data to a local Graphite instance):
        <pre>sitespeed.io -u http://www.cybercom.com --graphiteHost localhost --graphiteNamespace cybercom-production -b chrome -n 11</pre>
      </li>
    </ol>
    <ol>
      <li>
        If you want to break your build, you can either generate JUnit XML and use the built in
        post task <strong>Publish JUnit test result report</strong>.
      </li>
      <li>
        In the execute shell form:
        <pre>sitespeed.io -u http://stage.cybercom.com --junit > $WORKSPACE/junit.xml</pre>
        And in the post task <strong>Test report XMLs</strong>add:
        <pre>junit.xml</pre>
      </li>
      <li>
        Using TAP, you need to install the <a href="https://wiki.jenkins-ci.org/display/JENKINS/TAP+Plugin">TAP plugin</a>
      </li>

      <li>Run the execute shell like this:
        <pre>sitespeed.io -u http://stage.cybercom.com --tap > $WORKSPACE/sitespeed.tap</pre>
      </li>
      <li>
        And choose the post task <strong>Publish TAP Results</strong> and in the Test Results box add:
        <pre>sitespeed.tap</pre>
      </li>
    </ol>
  </p>

  <p>
    If you want the browsers to run headless, use the <a href="https://wiki.jenkins-ci.org/display/JENKINS/Xvfb+Plugin">Xvfb plugin</a>.
  </p>

  </div>

<div class="section" id="travis">
      <h2>Travis integration</h2>
      <p>Coming soon!</p>
</div>

<div class="section" id="grunt">
      <h2>Grunt integration</h2>
      <p>Coming soon!</p>
</div>

<div class="section" id="graphite">
    <div class="page-header">
 <h2>Graphite</h2>
</div>
  <p>The easiest way to graph your data (and keep track how you are doing over time), is sending the data to <a href="http://graphite.wikidot.com/">Graphite</a>. And then
    use a tool to create the graphs. I like <a href="http://grafana.org/">Grafana</a>, because it is super simple and look nice. Here's how you do it:
  </p>
  <ul>
    <li>
      Install Graphite - if you are on Mac OS X and want to test it out, use <a href=""></a> or another Vagrant setup.
    </li>
    <li>
      Install Grafana - either by Vagrant or just download and install InfluxDb & ElasticSearch
    </li>
    <li>
      Send the data from sitespeed.io to Graphite
    </li>
    <li>
      Create the graphs in Grafana. We will soon add a video of how to do it.
    </li>
  </ul>

  <p>
      Here's a couple of examples of what ut can look like. Here we test one site, something like this:
<pre class="bash">sitespeed.io -u http://www.cybercom.com --graphiteHost localhost -m 5 --graphiteNamespace cybercom -b chrome -n 11</pre>

And setup the following graphs:
<p class="text-center">
  <a href="grafana-page-metrics.png"><img src="grafana-page-metrics.png" alt="sitespeed.io page metrics sent to Graphite" class="img-thumbnail"/></a>
</p>
<p class="text-center">
  <a href="grafana-timing-metrics.png"><img src="grafana-timing-metrics.png" alt="sitespeed.io timing metrics sent to Graphite" class="img-thumbnail"/></a>
</p>

  </p>

<p>
  In this example, we compare four Swedish newspapers, runing it like this
  <pre class="bash">$ sitespeed.io  --sites /Users/peter/swedish.txt --graphiteHost localhost --graphiteNamespace newspapers -b chrome -n 7</pre>
and the result:
<p class="text-center">
  <a href="grafana-swedish-newspapers.png"><img src="grafana-swedish-newspapers.png" alt="sitespeed.io comparing multiple sites" class="img-thumbnail"/></a>
</p>
</p>

<p>
  And the last example, we fetch data from WebPageTest and create the following:
  <p class="text-center">
    <a href="grafana-wpt-dark.png"><img src="grafana-wpt-dark.png" alt="sitespeed.io running WebPageTest and graphing the data" class="img-thumbnail"/></a>
  </p>
</p>
</div>

<div class="section">
      <div class="page-header">
      <h2 id="timingMetrics">Timing metrics</h2>
    </div>
    <p>
      All the metrics are collected using an empty cache.</p>
    <ul>
      <li><em>backEndTime</em> - The time it takes for the network and the server to generate and start sending the HTML. Definition: responseStart - navigationStart</li>
      <li><em>domContentLoadedTime</em> - The time the browser takes to parse the document and execute deferred and parser-inserted scripts including the network time from the users location to your server. Definition: domContentLoadedEventStart - navigationStart</li>
      <li><em>domInteractiveTime</em> - The time the browser takes to parse the document, including the network time from the users location to your server. Definition: domInteractive - navigationStart</li>
      <li><em>domainLookupTime</em> - The time it takes to do the DNS lookup. Definition: domainLookupEnd - domainLookupStart</li>
      <li><em>frontEndTime</em> - The time it takes for the browser to parse and create the page. Definition: loadEventStart - responseEnd</li>
      <li><em>pageDownloadTime</em> - How long time does it take to download the page (the HTML). Definition: responseEnd - responseStart</li>
      <li><em>pageLoadTime</em> - The time it takes for page to load, from initiation of the pageview (e.g., click on a page link) to load completion in the browser. Important: this is only relevant to some pages, depending on how you page is built. Definition: loadEventStart - navigationStart</li>
      <li><em>redirectionTime</em> - Time spent on redirects. Definition: fetchStart - navigationStart</li>
      <li><em>serverConnectionTime</em> - How long time it takes to connect to the server. Definition: connectEnd - connectStart</li>
      <li><em>firstPaint</em> - This is when the first paint happens on the screen. If the browser support this metric, we use that. Else we use the time of the last non-async script or css from the head. You can easily verify if the first paint metrics is valid for you, by record a video using WebPageTest, and then check exactly when the first paint happens and compare that with the timing from the browser.</li>
      <li> <a href="https://github.com/WPO-Foundation/RUM-SpeedIndex">RUM-SpeedIndex</a> - created by Pat Meenan
        and calculate SpeedIndex measurements using Resource Timings. Itsn't as perfect as Speed Index in WPT but a good start.</li>
    </ul>
    </div>

<div class="section">
      <div class="page-header">
      <h2 id="timingMetricsWPT">Timing metrics collected using WPT</h2>
    </div>
    <p>
      All the metrics are collected both for first and repeated view.</p>
    <ul>
      <li><em>firstPaint</em></li>
      <li><em>loadTime</em></li>
      <li><em>TTFB</em></li>
      <li><em>SpeedIndex</em> - is the average time at which visible parts of the page are displayed. It is expressed in milliseconds and dependent on size of the view port. You need to <a href="https://sites.google.com/a/webpagetest.org/docs/using-webpagetest/metrics/speed-index">read more</a> to fully understand how it works.</li>
      <li><em>VisualComplete</em></li>
    </ul>
</div>

<div class="section">
      <div class="page-header">
      <h2 id="feature" style="word-wrap: break-word;">Create a new feature/improvement request</h2>
    </div>
    <p>
      If you have ideas of how sitespeed.io can be improved or if you have any features that you think is missing, please add it to the <a href="https://github.com/sitespeedio/sitespeed.io/issues?labels=&milestone=&page=1&state=open" >issue list</a>.
    </p>

    </div>


<div class="section">

      <div class="page-header">
      <h2 id="developers">Developers</h2>
    </div>
    <p style="word-wrap: break-word;">
    You can fork the project at <a href="https://github.com/sitespeedio/sitespeed.io" >https://github.com/sitespeedio/sitespeed.io</a> and create
    your own version or contribute to the existing one.
    The master branch is the latest release and/or in production-ready state.
    Clone that and you know it will always work. The next coming branch is named version-wip (3.1-wip).
    </p>

    </div>

<div class="section">
      <div class="page-header">
      <h2 id="postTasks">Add your own post tasks</h2>
    </div>
    <p>When sitespeed.io collected all the metrics, you have the possibility to add your own post tasks,
      meaning writing your own nodejs code to take all the metrics and do whatever you want with it (store it to a database etc).
      </p>
      <p>
        You add your own post task (you can have multiple) in an directory and feed the directory name and path to sitespeed, like this:
<pre class="bash">
$ sitespeed.io -u http://www.sitespeed.io --postTasksDir myPostTaskDir
</pre>
      </p>
      <p>
        In that directory, create a file and follow the following standard:
<pre>
exports.task = function(result, config, cb) {
  console.log('yep this is my task running!')
  cb();
};
</pre>
The task will be called with the following:
<ul>
  <li>
    <strong>result</strong> - a JSON containg all the metrics collected. Print it out to see exactly how it is constructed
  </li>
  <li>
    <strong>config</strong> -  the sitespeed.io configuration object, contains info about the run and where to store the data
  </li>
  <li>
    <strong>cb</strong> - the callback to call when you are finished.
  </li>
</ul>
       All post tasks runs in parallell.
      </p>

    </div>


<div class="section">
    <div class="page-header">
      <h2 id="dependencies" style="word-wrap: break-word;">Dependencies</h2>
    </div>
      <p>
        Here are the dependencies for running sitespeed.io:
      </p>
      <dl class="dl-horizontal">
        <dt>NodeJS</dt>
        <dd>You need to have NodeJS installed to be able to run sitespeed.io</dd>

      <dt>Java 1.6</dt>
      <dd>You need to have Java 1.6 (or higher) installed because the Crawler and Selenium (who drives the browsers) uses Java.</dd>

        </dl>
</div>

<div class="section">
      <div class="page-header">
      <h2 id="components">Components</h2>
</div>

      <p>The following components are used by sitespeed.io:</p>
      <dl class="dl-horizontal">
      <dt>PhantomJS</dt>
      <dd>The headless WebKit <a href="http://phantomjs.org/">browser</a> by Ariya Hidayat.</dd>
      <dt>Handlebars</dt>
      <dd><a href="http://handlebarsjs.com/">The Javascript template system</a>.</dd>
      <dt>FastStats</dt>
      <dd>A <a href="https://github.com/bluesmoon/node-faststats">NodeJS library</a> to do statistical analysis of numeric datasets by Philip Tellis.</dd>
      <dt>gpagespeed</dt>
      <dd>Analyze your web page using <a href="https://www.npmjs.org/package/gpagespeed">Google Page Speed</a> by Geir GÃ¥sodden.</dd>
      <dt>YSlow</dt>
      <dd>Sitespeed.io uses the rule engine of <a href="http://yslow.org" >YSlow</a>, because it is great! YSlow was originally developed by Yahoo and now maintained by <strong>Marcel Duran</strong>, a rule engine & browser plugin created to test your web page against <a href="http://yslow.org/#web_performance_best_practices_and_rules" >best practices rules</a>. The version used is the <a href="https://github.com/marcelduran/yslow/wiki/PhantomJS" >YSlow/PhantomJs</a> version. Sitespeed uses it own ruleset of best practice performance rules, and the code can be found  <a href="https://github.com/soulgalore/yslow/blob/master/src/common/rulesets/ruleset_sitespeed.js" >here</a>.</dd>
      <dt>Bootstrap</dt>
      <dd><a href="http://getbootstrap.com/" >Bootstrap</a> is a front end framework to create nice looking HTML, all the front end of the result pages produced by sitespeed are built with Bootstrap.</dd>
      <dt>Crawler</dt>
      <dd>This is a simple  <a href="https://github.com/soulgalore/crawler" >Java crawler</a> that output all links within a domain to a file, it can follow a specific path or make sure urls containing X not will be fetched. In the backend it uses Java:s best HTTP framework: <a href="http://hc.apache.org/" >HttpComponents</a> that makes sure it can do whatever you want.</dd>
      <dt>Stupid Table Plugin</dt>
      <dd><a href="https://github.com/joequery/Stupid-Table-Plugin" >Stupid Table Plugin</a> by Joseph McCullough is a really small table column sorter.</dd>
      <dt>BrowserTime</dt>
      <dd><a href="https://github.com/tobli/browsertime">BrowserTime</a> collects browser timings using the Navigation Timing API.</dd>
      <dt>WPT-wrapper</dt>
      <dd><a href="https://www.npmjs.org/package/webpagetest">WebPageTest API wrapper</a> for NodeJS by Marcel Duran.</dd>
      <dt></dt>
      <dd></dd>
      </dl>

</div>



<div class="section">
      <div class="page-header">
      <h2 id="feature" style="word-wrap: break-word;">Create a new feature/improvement request</h2>
    </div>
    <p>
      If you have ideas of how sitespeed.io can be improved or if you have any features that you think is missing, please add it to the <a href="https://github.com/sitespeedio/sitespeed.io/issues?labels=&milestone=&page=1&state=open" >issue list</a>.
    </p>

    </div>


<div class="section">
      <div class="page-header">
      <h2 id="bug">Report a bug</h2>
    </div>
    <p style="word-wrap: break-word;">
     If you find a bug, go through the current known bug list <a href="https://github.com/sitespeedio/sitespeed.io/issues?labels=bug&state=open" >https://github.com/sitespeedio/sitespeed.io/issues?labels=bug&state=open</a>. If it doesn't exist there, please add it!
    </p>

    </div>

</div>
</div>
